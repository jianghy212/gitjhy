<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.school.dao.RegesterDao">
<sql id="cityname">
	<where>
	<if test="cityname!=null and cityname!='' ">
	name like #{cityname}
	</if>
	<if test="cityname==null">
	name is not null
	</if>
	</where>
</sql>
<select id="findCityName" resultType="TbSchooladd">
  	select * from schooladd 
  	<include refid="cityname"></include>
</select>
<select id="findUserName" resultType="TbUser">
  	select * from userinfo where user_account=#{userName}
</select>
<select id="checkUser" resultType="int">
  	select count(*) from userinfo where user_account=#{account} and user_pwd=#{pwd}
</select>
<select id="findUser" resultType="TbUser">
    select * from userinfo where user_account=#{user_account}
</select>
<insert id="addUserInfo">
insert into userinfo(user_account,user_name,user_pwd,user_identity,user_sex,user_image,user_academy,loginin) 
values (#{useraccount},#{username},#{userpwd},#{iden},#{sex},#{img},#{academy},#{loginin})
</insert>
<update id="checkLogin">
UPDATE userinfo SET loginin = #{num} WHERE user_account = #{account}
</update>
<update id="editUserinfo">
UPDATE userinfo SET user_name=#{username},user_sex=#{sex} WHERE user_account = #{useraccount}
</update>
<update id="editImg">
UPDATE userinfo SET user_image = #{name} WHERE user_account = #{account}
</update>
</mapper>
